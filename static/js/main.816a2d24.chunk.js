(this["webpackJsonpdesafio-login-deploy-react"]=this["webpackJsonpdesafio-login-deploy-react"]||[]).push([[0],{32:function(e,t,c){},36:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(14),s=c.n(r),o=c(5),i=(c(32),function(e){return e}),d=c(16),j=c(4),l=c(17),u=c(3),b="LOGIN_USER",O="".concat(b,"_INIT"),p="".concat(b,"_SUCCESS"),h="".concat(b,"_ERROR"),m=function(e,t){var c=e.username,n=e.password;return function(e){e({type:O});var a=function(t){e({type:h,payload:t})};try{fetch("https://api-mock-mia.herokuapp.com/auth/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:c,password:n})}).then((function(e){return e.json()})).then((function(n){n.jwt?(localStorage.jwt=n.jwt,function(t){e({type:p,payload:t})}(c),t()):a(n.error)}))}catch(r){a("Hay un error")}}},f=c(1),v=function(e){var t=e.isLoading,c=Object(u.g)(),a=Object(n.useState)({username:"",password:""}),r=Object(l.a)(a,2),s=r[0],i=r[1],b=Object(o.b)(),O=function(e){var t=e.target;i(Object(j.a)(Object(j.a)({},s),{},Object(d.a)({},t.name,t.value)))},p=function(){return c.push("/products")};return Object(f.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),b(m(s,p))},children:[Object(f.jsx)("div",{className:"card",children:Object(f.jsx)("input",{id:"username",name:"username",className:"form-control username",placeholder:"username",onChange:O,value:s.username})}),Object(f.jsx)("div",{className:"card",children:Object(f.jsx)("input",{id:"password",name:"password",className:"form-control",placeholder:"Password",type:"password",onChange:O,value:s.password})}),Object(f.jsx)("div",{className:"card",children:Object(f.jsx)("button",{id:"buttonSubmit",className:"btn btn-primary",color:"primary",disabled:t,type:"submit",children:t?"Loading...":"Submite"})})]})},x=function(){var e=Object(o.c)(i);if(e.data&&Object.keys(e.data).length>0)return Object(f.jsx)("div",{className:"card",children:Object(f.jsxs)("p",{id:"log-success",children:["Logged in as ",Object(f.jsx)("b",{children:e.data})]})});var t=e.loading,c=e.error;return Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"col-md-6 offset-md-3 mt-5",children:[Object(f.jsx)(v,{isLoading:t}),c&&Object(f.jsx)("div",{className:"card",children:Object(f.jsxs)("p",{id:"paragraph",children:[Object(f.jsx)("b",{children:"Error: "})," ",e.error]})})]})})},g="LIST_PRODUCTS",y="".concat(g,"_INIT"),N="".concat(g,"_SUCCESS"),S="".concat(g,"_ERROR"),w=function(){return function(e){e({type:y});var t=function(t){e({type:S,payload:t})};try{fetch("https://api-mock-mia.herokuapp.com/products",{method:"GET"}).then((function(e){return e.json()})).then((function(c){c?e({type:N,payload:c}):t(c.error)}))}catch(c){t("Hay un error")}}},C=c(10),L=function(){var e=Object(o.c)((function(e){return e.products.data})),t=Object(o.b)();return Object(n.useEffect)((function(){t(w())}),[t]),Object(f.jsx)("div",{children:e.map((function(e){return Object(f.jsx)("div",{className:"list-group-item",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-4",children:e.name}),Object(f.jsx)("div",{className:"col-4",children:e.price}),Object(f.jsx)("div",{className:"col-4",children:Object(f.jsx)(C.b,{to:"/products/remove/".concat(e.id),className:"btn btn-danger",children:"Delete"})})]})},e.id)}))})},E=function(){var e=Object(u.h)().id,t=Object(o.c)((function(e){return e.products.data})),c=Object(n.useState)(""),a=Object(l.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var c=t.filter((function(t){return t.id===e}));s(c)}),[e,t]),Object(f.jsxs)("div",{children:["seguro deseas borrar a ",r]})},P=c(24),R=["component","isLogin"],T=function(e){var t=e.component,c=e.isLogin,n=Object(P.a)(e,R);return c?Object(f.jsx)(u.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return Object(f.jsx)(t,Object(j.a)({},e))}})):Object(f.jsx)(u.a,{to:"/"})};c(36);var I=function(){var e=Object(o.c)((function(e){return e.login.success}));return Object(f.jsx)("div",{className:"App text-center container",children:Object(f.jsx)(C.a,{basename:"desafio-login-deploy-react",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("nav",{className:"navbar navbar-expand-lg",children:Object(f.jsxs)("ul",{className:"nabvar-nav",children:[Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(C.c,{to:"/",children:"Login"})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(C.c,{to:"/products",children:"Products"})})]})}),Object(f.jsxs)(u.d,{children:[Object(f.jsx)(u.b,{exact:!0,path:"/",children:Object(f.jsx)(x,{})}),Object(f.jsx)(u.b,{exact:!0,path:"/products",children:Object(f.jsx)(L,{})}),Object(f.jsx)(T,{exact:!0,path:"/products/remove/:id",isLogin:e,component:E})]})]})})})},_=c(12),k=c(22),D=c(23),F={data:{},error:null,success:null,loading:!1},U={data:[],error:null,success:null,loadingProducts:!1},J=Object(_.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case p:return Object(j.a)(Object(j.a)({},e),{},{data:t.payload,loading:!1,success:!0,error:!1});case h:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,success:!1,error:t.payload});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(j.a)(Object(j.a)({},e),{},{loadingProducts:!0});case N:return Object(j.a)(Object(j.a)({},e),{},{data:t.payload,loadingProducts:!1,success:!0,error:!1});case S:return Object(j.a)(Object(j.a)({},e),{},{loadingProducts:!1,success:!1,error:t.payload});default:return e}}}),B=Object(_.createStore)(J,Object(k.composeWithDevTools)(Object(_.applyMiddleware)(D.a))),G=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,39)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};c(37);s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(o.a,{store:B,children:Object(f.jsx)(I,{})})}),document.getElementById("root")),G()}},[[38,1,2]]]);
//# sourceMappingURL=main.816a2d24.chunk.js.map