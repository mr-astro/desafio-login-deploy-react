(this["webpackJsonpdesafio-login-deploy-react"]=this["webpackJsonpdesafio-login-deploy-react"]||[]).push([[0],{32:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(14),s=c.n(r),o=c(5),i=(c(32),c(10)),d=c(3),l=c(1),j=function(){return Object(l.jsx)("nav",{className:"navbar navbar-expand-lg",children:Object(l.jsxs)("ul",{className:"nabvar-nav",children:[Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(i.c,{exact:!0,to:"/",activeClassName:"active",children:"Login"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(i.c,{to:"/products",activeClassName:"active",children:"Products"})})]})})},u=function(e){return e},b=c(16),O=c(4),p=c(17),h="LOGIN_USER",m="".concat(h,"_INIT"),f="".concat(h,"_SUCCESS"),g="".concat(h,"_ERROR"),v=function(e,t){var c=e.username,n=e.password;return function(e){e({type:m});var t=function(t){e({type:g,payload:t})};try{fetch("https://api-mock-mia.herokuapp.com/auth/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:c,password:n})}).then((function(e){return e.json()})).then((function(n){n.jwt?(localStorage.jwt=n.jwt,function(t){e({type:f,payload:t})}(c)):t(n.error)}))}catch(a){t("Hay un error")}}},x=function(e){var t=e.isLoading,c=Object(n.useState)({username:"",password:""}),a=Object(p.a)(c,2),r=a[0],s=a[1],i=Object(o.b)(),d=function(e){var t=e.target;s(Object(O.a)(Object(O.a)({},r),{},Object(b.a)({},t.name,t.value)))},j=Object(n.useCallback)((function(e){e.preventDefault(),i(v(r))}),[i,r]);return Object(l.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:j,children:[Object(l.jsx)("div",{className:"card",children:Object(l.jsx)("input",{id:"username",name:"username",className:"form-control username",placeholder:"username",onChange:d,value:r.username})}),Object(l.jsx)("div",{className:"card",children:Object(l.jsx)("input",{id:"password",name:"password",className:"form-control",placeholder:"Password",type:"password",onChange:d,value:r.password})}),Object(l.jsx)("div",{className:"card",children:Object(l.jsx)("button",{id:"buttonSubmit",className:"btn btn-primary",color:"primary",disabled:t,type:"submit",children:t?"Loading...":"Submit"})})]})},y=function(){var e=Object(o.c)(u);if(e.login.data&&Object.keys(e.login.data).length>0)return Object(l.jsx)("div",{className:"card",children:Object(l.jsxs)("p",{id:"log-success",children:["Logged in as ",Object(l.jsx)("b",{children:e.login.data})]})});var t=e.loging,c=e.login.error;return Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"col-md-6 offset-md-3 mt-5",children:[Object(l.jsx)(x,{isLoading:t}),c&&Object(l.jsx)("div",{className:"card",children:Object(l.jsxs)("p",{id:"paragraph",children:[Object(l.jsx)("b",{children:"Error: "})," ",e.login.error]})})]})})},N="LIST_PRODUCTS",S="".concat(N,"_INIT"),w="".concat(N,"_SUCCESS"),C="".concat(N,"_ERROR"),L=function(){return function(e){e({type:S});var t=function(t){e({type:C,payload:t})};try{fetch("https://api-mock-mia.herokuapp.com/products",{method:"GET"}).then((function(e){return e.json()})).then((function(c){c?e({type:w,payload:c}):t(c.error)}))}catch(c){t("Hay un error")}}},E=function(){var e=Object(o.c)((function(e){return e.products.data})),t=Object(o.b)();return Object(n.useEffect)((function(){t(L())}),[t]),Object(l.jsx)("div",{children:e.map((function(e){return Object(l.jsx)("div",{className:"list-group-item",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-4",children:e.name}),Object(l.jsx)("div",{className:"col-4",children:e.price}),Object(l.jsx)("div",{className:"col-4",children:Object(l.jsx)(i.b,{to:"/products/remove/".concat(e.id),className:"btn btn-danger",children:"Delete"})})]})},e.id)}))})},P=function(){var e=Object(d.g)().id,t=Object(o.c)((function(e){return e.products.data})),c=Object(n.useState)(""),a=Object(p.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){console.log(t);var c=t.filter((function(t){return t.id===e}));console.log(c),s(c)}),[e,t]),Object(l.jsxs)("div",{children:["seguro deseas borrar a ",r]})},R=c(24),T=["component","isLogin"],k=function(e){var t=e.component,c=e.isLogin,n=Object(R.a)(e,T);return c?Object(l.jsx)(d.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){return Object(l.jsx)(t,Object(O.a)({},e))}})):Object(l.jsx)(d.a,{to:"/"})},I=function(){var e=Object(o.c)((function(e){return e.login.success}));return Object(l.jsx)("div",{children:Object(l.jsxs)(i.a,{basename:"desafio-login-deploy-react",children:[Object(l.jsx)(j,{}),Object(l.jsxs)(d.d,{children:[Object(l.jsx)(k,{path:"/products/remove/:id",isLogin:e,component:P}),Object(l.jsx)(d.b,{path:"/products",component:E}),Object(l.jsx)(d.b,{path:"/",component:y}),Object(l.jsx)(d.b,{path:"*",children:Object(l.jsx)("h1",{children:"404 Not Found"})})]})]})})},_=function(){return Object(l.jsx)("div",{className:"App text-center container",children:Object(l.jsx)(I,{})})},D=c(12),F=c(22),U=c(23),J={data:{},error:null,success:null,loading:!1},B={data:[],error:null,success:null,loadingProducts:!1},G=Object(D.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(O.a)(Object(O.a)({},e),{},{loading:!0});case f:return Object(O.a)(Object(O.a)({},e),{},{data:t.payload,loading:!1,success:!0,error:!1});case g:return Object(O.a)(Object(O.a)({},e),{},{loading:!1,success:!1,error:t.payload});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(O.a)(Object(O.a)({},e),{},{loadingProducts:!0});case w:return Object(O.a)(Object(O.a)({},e),{},{data:t.payload,loadingProducts:!1,success:!0,error:!1});case C:return Object(O.a)(Object(O.a)({},e),{},{loadingProducts:!1,success:!1,error:t.payload});default:return e}}}),H=Object(D.createStore)(G,Object(F.composeWithDevTools)(Object(D.applyMiddleware)(U.a))),M=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,38)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};c(36);s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(o.a,{store:H,children:Object(l.jsx)(_,{})})}),document.getElementById("root")),M()}},[[37,1,2]]]);
//# sourceMappingURL=main.a60b8ce6.chunk.js.map